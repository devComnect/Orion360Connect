/* =========================================
   VARIAVEIS GLOBAIS & THEME (CYBERPUNK)
   ========================================= */
:root {
    /* Cores Base */
    --bg-dark: #0b0c10;
    --bg-panel: #1f2833;
    --text-main: #c5c6c7;
    
    /* Cores Neon */
    --neon-blue: #0dcaf0; 
    --neon-green: #39ff14; 
    --neon-red: #bb2d3b; 
    --neon-yellow: #fcee0a; 
    --neon-grey: #b1b6be;
    
    /* Raridades RPG */
    --rarity-common: #adb5bd;    /* Cinza */
    --rarity-rare: #0dcaf0;      /* Azul */
    --rarity-epic: #d63384;      /* Roxo/Magenta */
    --rarity-legendary: #ffc107; /* Dourado */

    /* Utilitários */
    --glass-border: 1px solid rgba(255, 255, 255, 0.1);
    --tech-font: 'Courier New', Courier, monospace;
    --ui-font: system-ui, -apple-system, sans-serif;
}

/* Reset Básico de Segurança */
*, *::before, *::after {
    box-sizing: border-box;
}

body {
    background-color: var(--bg-dark);
    color: var(--text-main);
    font-family: var(--ui-font);
    overflow-x: hidden;
}

/* Utilitários de Texto */
.font-tech { font-family: var(--tech-font); letter-spacing: -0.5px; }
.text-neon-blue { color: var(--neon-blue); text-shadow: 0 0 5px var(--neon-blue); }
.text-neon-green { color: var(--neon-green); text-shadow: 0 0 5px var(--neon-green); }
.text-white-glow { color: #fff; text-shadow: 0 0 5px rgba(255,255,255,0.5); }
.text-neon-red { color: var(--neon-red); text-shadow: 0 0 5px var(--neon-red); }
.text-neon-grey { color: var(--neon-grey); text-shadow: 0 0 5px var(--neon-grey); }
/* =========================================
   ESTRUTURA DE CARDS (CYBER PANELS)
   ========================================= */
.cyber-card {
    background: rgba(31, 40, 51, 0.95);
    border: 1px solid #2c3e50;
    border-left: 3px solid var(--neon-blue);
    border-radius: 4px;
    margin-bottom: 1.5rem;
    position: relative;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    transition: transform 0.2s, box-shadow 0.2s;
    overflow: hidden;
}

.cyber-card:hover {
    box-shadow: 0 0 15px rgba(69, 243, 255, 0.1);
    border-color: #4ec0e9;
}

.cyber-header {
    background: rgba(0, 0, 0, 0.3);
    padding: 10px 15px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.cyber-title {
    font-family: var(--tech-font);
    font-weight: bold;
    text-transform: uppercase;
    font-size: 0.9rem;
    color: #fff;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* =========================================
   HEADER DO PERFIL
   ========================================= */
.profile-hero {
    /* Fallback color + Gradient + Image */
    background: linear-gradient(180deg, rgba(11,12,16,0) 0%, rgba(11,12,16,1) 100%), 
                url('https://c4.wallpaperflare.com/wallpaper/586/364/563/digital-art-grid-lines-abstract-dark-background-wallpaper-preview.jpg');
    background-size: cover;
    background-position: center;
    padding: 3rem 0 1rem 0;
    position: relative;
    border-bottom: 2px solid var(--neon-blue);
}

.avatar-frame {
    width: 130px;
    height: 130px;
    position: relative;
    margin: 0 auto;
    border: 2px solid var(--neon-blue);
    padding: 4px;
    background: #000;
}

.avatar-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    /* Clip-path tech style */
    clip-path: polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%);
}

.level-badge {
    position: absolute;
    bottom: -10px;
    right: -10px;
    background: #000;
    border: 1px solid var(--neon-blue);
    color: var(--neon-blue);
    font-family: var(--tech-font);
    padding: 2px 8px;
    font-weight: bold;
    z-index: 2;
    font-size: 0.8rem;
}

/* Caminhos (Specializations) Colors */
.spec-vermelho .avatar-frame, .spec-vermelho .level-badge { border-color: var(--neon-red); color: var(--neon-red); }
.spec-vermelho .profile-hero { border-bottom-color: var(--neon-red); }

.spec-cinza .avatar-frame, .spec-cinza .level-badge { border-color: var(--neon-grey); color: var(--neon-grey); }
.spec-cinza .profile-hero { border-bottom-color: var(--neon-grey); }

/* =========================================
   XP & STATS
   ========================================= */
.xp-system {
    max-width: 600px;
    margin: 1rem auto;
    padding: 0 15px; /* Padding safe para mobile */
}

.tech-progress {
    height: 12px;
    background: #333;
    border: 1px solid #555;
    position: relative;
}

.tech-progress-bar {
    background: linear-gradient(90deg, var(--neon-blue), #fff);
    box-shadow: 0 0 10px var(--neon-blue);
    height: 100%;
    transition: width 1s ease-in-out;
}

.xp-numbers {
    font-family: var(--tech-font);
    font-size: 0.8rem;
    display: flex;
    justify-content: space-between;
    margin-top: 4px;
    color: #888;
}

/* Tracker Semanal */
.week-tracker {
    display: flex;
    gap: 4px;
    justify-content: center;
    margin-top: 10px;
}
.day-bit {
    width: 30px;
    height: 8px;
    background: #333;
    border-radius: 1px;
}
.day-bit.active { background: var(--neon-green); box-shadow: 0 0 5px var(--neon-green); }
.day-bit.missed { background: var(--neon-red); opacity: 0.5; }

/* =========================================
   BOTÕES E AÇÕES
   ========================================= */
.btn-cyber {
    background: transparent;
    border: 1px solid var(--neon-blue);
    color: var(--neon-blue);
    font-family: var(--tech-font);
    text-transform: uppercase;
    padding: 5px 15px;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.btn-cyber:hover {
    background: rgba(69, 243, 255, 0.1);
    color: #fff;
    box-shadow: 0 0 15px var(--neon-blue);
}

/* =========================================
   INVENTÁRIO & GRID
   ========================================= */
.inventory-grid {
    display: grid;
    /* CORREÇÃO: Grid Responsivo Automático (Minimo 140px por item) */
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 10px;
    padding: 10px;
}

.inventory-slot {
    background: #141414;
    border: 1px solid #333;
    padding: 10px;
    text-align: center;
    position: relative;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-height: 100px; /* Garante altura mínima visual */
}

/* Estilos de Raridade */
.inventory-slot.rarity-COMMON { border-color: var(--rarity-common); color: var(--rarity-common); }
.inventory-slot.rarity-COMMON:hover { box-shadow: 0 0 10px var(--rarity-common); }

.inventory-slot.rarity-RARE { border-color: var(--rarity-rare); color: var(--rarity-rare); }
.inventory-slot.rarity-RARE:hover { box-shadow: 0 0 15px var(--rarity-rare); background: rgba(13, 202, 240, 0.05); }

.inventory-slot.rarity-EPIC { border-color: var(--rarity-epic); color: var(--rarity-epic); }
.inventory-slot.rarity-EPIC:hover { box-shadow: 0 0 15px var(--rarity-epic); background: rgba(214, 51, 132, 0.05); }

.inventory-slot.rarity-LEGENDARY { border-color: var(--rarity-legendary); color: var(--rarity-legendary); }
.inventory-slot.rarity-LEGENDARY:hover { box-shadow: 0 0 20px var(--rarity-legendary); background: rgba(255, 193, 7, 0.05); }

.inventory-slot img { filter: drop-shadow(0 0 2px currentColor); }

.inventory-count { font-family: var(--tech-font); font-size: 1.2rem; font-weight: bold; color: #fff; }
.inventory-label { font-size: 0.7rem; text-transform: uppercase; color: #777; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.inventory-bonus-text { font-size: 0.65rem; color: #aaa; margin-top: -2px; font-family: var(--tech-font); }

/* Barras de Crafting/Token */
.crafting-progress {
    height: 4px;
    background: #222;
    margin-top: 5px;
    width: 100%;
}
.crafting-bar { height: 100%; background: #00bcd4; }

/* =========================================
   PATRULHA (CODEBREAKER)
   ========================================= */
.patrol-card-static {
    padding: 20px;
    text-align: center;
    border: 1px solid #333;
    background: radial-gradient(circle at center, #1a252f 0%, #0b0c10 100%);
    cursor: pointer;
    transition: all 0.3s;
}

.patrol-status-ready {
    border: 1px solid var(--neon-red);
    box-shadow: 0 0 10px rgba(255, 0, 60, 0.2);
    animation: critical-pulse 2s infinite;
}

.patrol-status-done {
    border: 1px solid var(--neon-green);
    opacity: 0.7;
    cursor: default;
}

@keyframes critical-pulse {
    0% { box-shadow: 0 0 5px rgba(255, 0, 60, 0.2); }
    50% { box-shadow: 0 0 20px rgba(255, 0, 60, 0.6); border-color: #ff4d4d; }
    100% { box-shadow: 0 0 5px rgba(255, 0, 60, 0.2); }
}

/* =========================================
   RANKINGS & BADGES
   ========================================= */
.stat-box {
    text-align: center;
    padding: 10px;
    border-right: 1px solid #333;
}
.stat-box:last-child { border-right: none; }
.stat-value { font-family: var(--tech-font); font-size: 1.5rem; font-weight: bold; color: #fff; }
.stat-label { font-size: 0.75rem; color: #666; text-transform: uppercase; letter-spacing: 1px; }

/* History List (Terminal Style) */
.terminal-list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-family: var(--tech-font);
    font-size: 0.85rem;
}
.terminal-item {
    padding: 8px 10px;
    border-bottom: 1px dashed #333;
    display: flex;
    justify-content: space-between;
}
.terminal-item:hover { background: rgba(255,255,255,0.02); }
.term-date { color: var(--neon-blue); margin-right: 10px; }

/* =========================================
   WIDGETS & POPOVERS
   ========================================= */
/* Insígnias Redondas */
.featured-insignia-badge, .insignia-preview {
    clip-path: circle(48% at center);
    -webkit-clip-path: circle(48% at center);
    border-radius: 50%;
}
.insignia-preview:hover { transform: scale(1.1); box-shadow: 0 0 15px rgba(69, 243, 255, 0.3); }

/* Protocol Widget (Path) */
.protocol-widget {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    border-radius: 6px;
    background: rgba(20, 20, 25, 0.8);
    border: 1px solid #333;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
}
.protocol-widget::before {
    content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
    background: #555; transition: all 0.3s;
}

.widget-icon { font-size: 1.8rem; margin-right: 20px; display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; background: rgba(255,255,255,0.05); border-radius: 4px; }
.widget-content { flex-grow: 1; }
.widget-title { font-family: var(--tech-font); font-weight: bold; font-size: 1rem; letter-spacing: 1px; margin-bottom: 2px; }
.widget-desc { font-size: 0.8rem; color: #888; font-family: var(--ui-font); }
.widget-action { font-family: var(--tech-font); font-weight: bold; font-size: 0.9rem; display: flex; align-items: center; gap: 8px; opacity: 0.8; }
.widget-status-text { font-family: var(--tech-font); font-size: 0.8rem; letter-spacing: 2px; opacity: 0.5; }

/* Estados do Widget */
.widget-locked { border-color: #333; background: #0f1012; cursor: not-allowed; opacity: 0.9; background-image: repeating-linear-gradient(45deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 10px, rgba(255, 255, 255, 0.01) 10px, rgba(255, 255, 255, 0.01) 20px); }
.widget-locked::before { background: var(--neon-red); }
.widget-ready { border-color: rgba(13, 202, 240, 0.3); background: linear-gradient(90deg, rgba(13, 202, 240, 0.05), rgba(0,0,0,0)); }
.widget-ready::before { background: var(--neon-blue); }
.widget-ready:hover { border-color: var(--neon-blue); box-shadow: 0 0 15px rgba(13, 202, 240, 0.15); transform: translateY(-2px); }

/* =========================================
   STATUS WINDOW (MODAL JRPG)
   ========================================= */

/* O Botão de abrir */
.btn-cyber-status {
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid #45a29e;
    color: #fff;
    transition: all 0.3s ease;
    letter-spacing: 1px;
}
.btn-cyber-status:hover {
    background: rgba(69, 243, 255, 0.1);
    box-shadow: 0 0 15px rgba(69, 243, 255, 0.2);
    border-color: #66fcf1;
    transform: translateY(-2px);
}

/* O Modal em si */
.cyber-modal-content {
    background-color: #0b0c10; /* Fundo bem escuro */
    border: 1px solid var(--neon-blue);
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.8), 
                inset 0 0 20px rgba(13, 202, 240, 0.05);
    border-radius: 4px;
}

/* Fundo da área de lista */
.status-screen-bg {
    background: rgba(20, 20, 25, 0.5);
    min-height: 200px;
}

.buff-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 20px; /* Mais espaçado no modal */
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    transition: background 0.2s;
}

.buff-row:hover {
    background: rgba(255, 255, 255, 0.03);
}

.buff-source {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: var(--ui-font);
    font-weight: 600;
    color: #e0e0e0;
    font-size: 0.95rem;
}

.buff-target {
    font-family: var(--tech-font);
    font-size: 0.7rem;
    text-transform: uppercase;
    opacity: 0.5;
    margin-left: auto; /* Empurra para a direita */
    margin-right: 15px;
}

.buff-value {
    font-family: var(--tech-font);
    font-weight: bold;
    font-size: 1.1rem;
    min-width: 60px;
    text-align: right;
}

/* Cores dos atributos (Garante que apareçam no fundo escuro) */
.stat-gold { color: #ffd700; text-shadow: 0 0 5px rgba(255, 215, 0, 0.3); }
.stat-int  { color: #0dcaf0; text-shadow: 0 0 5px rgba(13, 202, 240, 0.3); }
.stat-def  { color: #20c997; text-shadow: 0 0 5px rgba(32, 201, 151, 0.3); }
.stat-dex  { color: #d63384; text-shadow: 0 0 5px rgba(214, 51, 132, 0.3); }
.stat-str  { color: #ff4d4d; text-shadow: 0 0 5px rgba(255, 77, 77, 0.3); }
.stat-all  { color: #f8f9fa; }